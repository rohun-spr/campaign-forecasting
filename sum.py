import pandas as pd
from matplotlib import pyplot as plt
import pprint as pp

#initial = [0.0007850834151128558, 0, 0, 0.0008942311691552635, 0.0004431863099349594, 0.00041736227045075126, 0.0005638548178261656, 8.127306123112433e-05, 0, 0, 0, 0.0001514666045265212, 0.000155039618159569, 0.00016611295681063124, 0.0001603229779264409, 0.00012805894651815112, 5.2491785035641923e-05, 0.00026559641149737355, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0007653650646950093, 0.00018244845831052726, 0.0013831258644536654, 0, 0.00029890004782400767, 0, 0, 0.0004170141784820684, 0, 0, 0.0005307855626326964, 0, 0, 0.0004903677758318739, 0.0003348588012054917, 0.00040461258345134534, 0, 0.00014956625785222854, 0, 0.0005815644082582146, 0.0002171635187004935, 0, 0, 8.739818951288956e-05, 0.00011116912198230425, 0.0002863776298160024, 9.697775745862859e-05, 0.00033605091171312455, 0.0008568566105388969, 0.00016562324025307232, 0.00010973271420980896, 0.00019828953720946272, 0.00030613806826878924, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009053870529651426, 1.2396873508501155e-05, 0.01716500553709856, 0.0016524373450839988, 6.48760866744518e-06, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02516334098534346, 0.0021344717182497333, 0.0012096398995068392, 0.011669908307863295, 0.0034949759720401923, 0.0010942557333241186, 0.0007527388812305013, 0.0013723775466911415, 0.0008623673336800849, 0.0037740317018662957, 0, 0.00019900573672306437, 0, 0.000120435287539249, 0.0013443871835088505, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7.979572294924992e-05, 0, 0, 0, 0, 0, 0.00029241274919586494, 0, 0.0003675794890645102, 0, 0.0002144082332761578, 0, 0.00016091399147155844, 4.174101785472039e-05, 0.00031009354488604064, 0, 0.00014989337130632074, 9.104151493080845e-05, 0.0002014178495837915, 0.0001010728157442569, 6.6006600660066e-05, 0.00012356962828977505, 0.00022174353775975672, 0, 0, 0.00020594203337472364, 0, 0.0001316087108515495, 5.8586884349490296e-05, 8.283974651037568e-05, 0.00016502414563815128, 0.00033836653554963415, 0.0005601029258445908, 0.0005947267560959493, 0.0006739058566233502, 0.0004911413981639979, 0.0007373379595493613, 0.0005615331101759158, 0.001010407194099222, 0.0009045077105575327, 0.0008085432570642529, 0.0007238710395901777, 0, 0, 0.0008998537737617637, 0.00012798088818736402, 0, 0.00041197473221642406, 0, 0, 5.4244643341470026e-05, 0.00020374641871649817, 0.00013489815189531904, 0.008100364883189175, 0.00019525629958482344, 8.326394671107411e-05, 0.00011340690952341438, 8.49096655502618e-05, 3.661338402252944e-05, 0.00024209671373235037, 1.2598266478532554e-05, 0.00018297754366509566, 0.00018788102595997485, 8.077870673290521e-05, 0.00020966324514094277, 1.805591918170574e-05, 0.00018949151137245148, 0.0003888574660633484, 0.0008436040410691138, 0.0002041269669734575, 4.611518034878448e-05, 6.710452368370283e-05, 0, 0, 0, 0, 0, 0.004316546762589928, 0.001272264631043257, 0, 0, 0, 0, 0.0016090104585679806, 0, 8.007687379884689e-05, 0.0001871187455559298, 1.4502211587267058e-05, 0, 0.00042744176106005556, 0.0002800728189329226, 0, 0, 0.001040582726326743, 0.0011928090653488966, 0.0010649627263045794, 0.0008275576704251578, 0, 0, 0.001557632398753894, 0.0007510326699211416, 0.001185302252074279, 0.0008635578583765112, 0.0004697040864255519, 0.0006503879507074395, 0, 0.00038354996803750265, 0.0005766458433445459, 0.0006563115292058631, 0, 0, 0.0013280212483399733, 0.0005980861244019139, 0.000580687193722913, 0.0004666814039741606, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0028847110315328756, 2.709696649460093e-05, 8.94222849747029e-05, 0.00017555741262628894, 0.00019586606025912614, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00023321604932012452, 0.0001505196691577672, 0.000768926578496419]

#From age and duration added, 9 features
#predictions = [0.0009,0.0010,0.0005,0.0011,0.0024,0.0024,0.0024,0.0009,0.0002,0.0002,0.0002,0.0013,0.0014,0.0013,0.0013,0.0013,0.0009,0.0009,0.0002,0.0002,0.0001,0.0001,0.0009,0.0005,0.0005,0.0002,0.0002,0.0003,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0009,0.0009,0.0004,0.0010,0.0010,0.0012,0.0004,0.0003,0.0001,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0001,0.0001,0.0001,0.0005,0.0005,0.0005,0.0005,0.0005,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0005,0.0005,0.0005,0.0002,0.0002,0.0002,0.0005,0.0005,0.0005,0.0029,0.0029,0.0029,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0002,0.0002,0.0001,0.0001,0.0001,0.0001,0.0000,0.0001,0.0001,0.0001,0.0001,0.0002,0.0002,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0098,0.0098,0.0098,0.0098,0.0098,0.0098,0.0098,0.0008,0.0008,0.0008,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0035,0.0035,0.0035,0.0010,0.0000,0.0000,0.0000,0.0000,0.0000,0.0003,0.0009,0.0003,0.0009,0.0003,0.0003,0.0003,0.0003,0.0011,0.0018,0.0020,0.0003,0.0015,0.0011,0.0019,0.0021,0.0002,0.0011,0.0018,0.0020,0.0002,0.0015,0.0011,0.0019,0.0020,0.0004,0.0010,0.0006,0.0014,0.0006,0.0010,0.0006,0.0027,0.0027,0.0027,0.0004,0.0005,0.0005,0.0003,0.0003,0.0011,0.0011,0.0001,0.0005,0.0011,0.0015,0.0015,0.0010,0.0010,0.0010,0.0011,0.0008,0.0009,0.0014,0.0006,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0004,0.0006,0.0003,0.0003,0.0011,0.0011,0.0003,0.0003,0.0003,0.0030,0.0030,0.0011,0.0011,0.0005,0.0005,0.0005,0.0001,0.0001,0.0010,0.0010,0.0010,0.0010,0.0010,0.0010,0.0006,0.0006,0.0006,0.0013,0.0013,0.0000,0.0000,0.0006,0.0006,0.0006,0.0013,0.0013,0.0010,0.0010,0.0002,0.0016,0.0016,0.0007,0.0007,0.0020,0.0020,0.0020,0.0003,0.0003,0.0001,0.0001,0.0001,0.0001,0.0001,0.0002,0.0012,0.0003,0.0002,0.0003,0.0001,0.0001,0.0001,0.0003,0.0005,0.0002,0.0003,0.0011,0.0013,0.0008,0.0003,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0014,0.0014,0.0027]

#From without age and duration
#predictions = [0.0026,0.0026,0.0008,0.0019,0.0007,0.0007,0.0007,0.0026,0.0002,0.0002,0.0002,0.0025,0.0024,0.0025,0.0025,0.0008,0.0026,0.0026,0.0003,0.0003,0.0003,0.0003,0.0025,0.0009,0.0009,0.0003,0.0003,0.0005,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004,0.0005,0.0005,0.0026,0.0026,0.0005,0.0025,0.0023,0.0024,0.0005,0.0005,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0007,0.0007,0.0007,0.0007,0.0007,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0009,0.0009,0.0009,0.0003,0.0003,0.0003,0.0009,0.0009,0.0009,0.0009,0.0009,0.0009,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0001,0.0001,0.0002,0.0002,0.0002,0.0002,0.0001,0.0001,0.0001,0.0003,0.0003,0.0003,0.0003,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0023,0.0023,0.0023,0.0023,0.0023,0.0023,0.0023,0.0008,0.0008,0.0008,0.0009,0.0009,0.0009,0.0009,0.0009,0.0007,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0008,0.0003,0.0003,0.0003,0.0002,0.0002,0.0002,0.0002,0.0002,0.0002,0.0019,0.0019,0.0019,0.0026,0.0000,0.0000,0.0000,0.0000,0.0000,0.0003,0.0009,0.0003,0.0009,0.0003,0.0003,0.0003,0.0003,0.0025,0.0025,0.0025,0.0008,0.0025,0.0025,0.0025,0.0025,0.0007,0.0025,0.0025,0.0025,0.0008,0.0025,0.0025,0.0025,0.0025,0.0008,0.0017,0.0009,0.0024,0.0009,0.0017,0.0009,0.0025,0.0025,0.0025,0.0002,0.0005,0.0005,0.0005,0.0005,0.0026,0.0019,0.0003,0.0008,0.0026,0.0023,0.0023,0.0024,0.0023,0.0023,0.0024,0.0008,0.0008,0.0009,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0005,0.0003,0.0003,0.0010,0.0010,0.0010,0.0010,0.0010,0.0003,0.0003,0.0003,0.0003,0.0003,0.0002,0.0002,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0010,0.0010,0.0010,0.0010,0.0010,0.0001,0.0001,0.0010,0.0010,0.0010,0.0010,0.0010,0.0010,0.0010,0.0002,0.0016,0.0016,0.0002,0.0002,0.0016,0.0016,0.0016,0.0002,0.0010,0.0001,0.0001,0.0001,0.0002,0.0002,0.0003,0.0005,0.0010,0.0003,0.0010,0.0001,0.0001,0.0001,0.0010,0.0005,0.0002,0.0005,0.0009,0.0012,0.0023,0.0008,0.0008,0.0008,0.0008,0.0008,0.0002,0.0002,0.0002,0.0025,0.0025,0.0025]

def r_squared(actual_values, predictedValues):
    sum_init = 0
    for i in actual_values:
        sum_init += float(i)
    mean = sum_init/len(actual_values)

    numerator = 0
    denominator = 0

    for index, actual in enumerate(actual_values):
        prediction = float(predictedValues[index])
        actual = float(actual)
        num = (prediction-mean)
        denom = (actual-mean)
        numerator += num * num
        denominator += denom * denom

    error = numerator/denominator
    return error

def visualize(file_name):
    df = pd.read_csv(file_name)
    x_vector = [i for i in range(len(df))]

    actual = df['actual']
    predictions = df['prediction']

    plt.plot(x_vector, actual, c = "blue", ls=":")
    plt.plot(x_vector, predictions, c="red", ls="-")
    plt.ylim([0,0.010])

    # noinspection PyUnusedLocal
    e_squared_error = r_squared(actual, predictions)

    plt.show()
    plt.close()

visualize("model_predictions_on_training.csv")
visualize("model_predictions_on_test_set.csv")